<%- include('../adminLayout/header.ejs') %>
<%- include('../adminLayout/sidebar.ejs') %>
<%- include('../adminLayout/navbar.ejs') %>
<div class="main-panel">
   <div class="content-wrapper">
      <div class="row">
         <div class="col-lg-12 grid-margin stretch-card">
            <div class="card">
               <div class="card-body">
                  <h3>User List</h3>
                  <div class="table-responsive" style="margin-top: 15px;">
                     <table class="table table-dark">
                        <thead>
                           <tr>
                              <th> No</th>
                              <th> username </th>
                              <th> Number </th>
                              <th> Adhar Number </th>
                              <th> Email </th>
                              <th> Action </th>
                           </tr>
                        </thead>
                        <tbody>
                           <% if(userData.length> 0){
                              for(let i = 0;i < userData.length;i++ ){ %>
                           <tr>
                              <td>
                                 <%= i+1 %>
                              </td>
                              <td>
                                 <%= userData[i].username %>
                              </td>
                              <td>
                                 <%= userData[i].phonenumber %>
                              </td>
                              <td>
                                 <%= userData[i].adharnumber %>
                              </td>
                              <td>
                                 <%= userData[i].email %>
                              </td>
                              <td>
                                 <% if(userData[i].is_block===true){ %>
                                 <a href="/admin/unblockuser/<%= userData[i]._id %>"><button type="button"
                                    class="btn btn-outline-success btn-sm">Unblock</button></a>
                                 <% }else{ %>
                                 <button type="button" class="btn btn-outline-danger"" data-bs-toggle="modal"
                                    data-bs-target="#staticBackdrop<%= userData[i]._id %>">
                                    Block</a>
                                    <% } %>
                              </td>
                           </tr>
                           <div class="modal fade" id="staticBackdrop<%= userData[i]._id %>" data-bs-backdrop="static"
                              data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel"
                              aria-hidden="true">
                           <div class="modal-dialog">
                           <div class="modal-content" style="background-color: #191C24;color: aliceblue;">
                           <div class="modal-header">
                           <h5 class="modal-title" id="staticBackdropLabel">Block User</h5>
                           <button type="button" class="btn-close" data-bs-dismiss="modal"
                              aria-label="Close"></button>
                           </div>
                           <div class="modal-body">
                           <p>Are you sure you want to block <%= userData[i].username %> ?</p>
                           </div>
                           <div class="modal-footer">
                           <a href="/admin/userlist"><button type="button" class="btn btn-secondary"
                              data-bs-dismiss="modal">Close</button></a>
                           <a href="/admin/blockuser/<%= userData[i]._id %>"><button type="button"
                              class="btn btn-primary">Yes</button></a>
                           </div>
                           </div>
                           </div>
                           </div>
                           <% } } else{ %>
                           <tr>
                              <td colspan="5">Users not found</td>
                           </tr>
                           <% } %>
                        </tbody>
                     </table>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>
<%- include('../adminLayout/footer.ejs') %>