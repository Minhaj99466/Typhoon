<%- include('../userLayout/head.ejs') %>

  <body>
    <!-- preloader Start -->
    <div id="preloader">
      <div id="status">
        <img src="/userAssets/images/preloader.gif" id="preloader_image" alt="loader">
      </div>
    </div>

    <!-- preloader Start -->

    <%- include('../userLayout/nav.ejs') %>
      <!-- page_title_section start -->
      <div class="page_title_section">
        <div class="page_header">
          <div class="container">
            <div class="row">
              <!-- section_heading start -->
              <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12">
                <div class="sub_title_section">
                  <ul class="sub_title">
                    <li><a href="javascript:;"> Home </a></li>
                    <li>Shopping Cart</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- page_title_section end -->
      <!--sw about us top start-->
      <!-- <div class="sw_about_top_wrapper">
      <div class="container">
        <div class="row">
          <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
            <div class="sw_abot_top_txt_wrapper">
              <div class="sw_left_heading_wraper sw_dark_heading_wraper">
                <h1>Shopping Cart</h1>
                <img src="/userAssets/images//hd_line_dark.png" alt="title" />
                <p>
                  Sed do eiusmod tempor incididunt ut labore et dolore magna
                  aliqua. Ut enimnim veniam, quis nostrud exercitation ullamco
                  laboris nisi ut aliquip ex ea commodo consequat. Duis aute
                  irure dolor in reprehenderit in voluptate velit esse cillum
                  dolore eu fugiat nulla pariatur. Excepteur sint occaecat.
                </p>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12">
            <div class="sw_about_top_img">
              <img src="/userAssets/images//iner_shop.png" alt="img" />
            </div>
          </div>
        </div>
      </div>
    </div> -->
      <!--sw about us top end-->
      <div class="cart_product_wrapper">
        <div class="container">
          <div class="row">
            <div class="shop_cart_page_wrapper" id="reloadDiv">
              <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
                <div class="table-responsive cart-calculations" >
                  <table class="table">
                    <thead class="cart_table_heading">
                      <tr>
                        <th>item</th>

                        <th>product</th>
                        <th>&nbsp;</th>
                        <th>price</th>

                        <th>Quantity</th>

                        <th>Total price</th>
                        <th>&nbsp;</th>
                      </tr>
                    </thead>
                    <tbody>
                      <% if(cart.length > 0) { %>
                        <% cart.forEach((product, index) => { %>
                        <tr>
                          <td><%= index+1 %></td>
                          <td>
                            <div class="table_cart_img">
                              <figure>
                                <img src="/distributorAssets/distributorImage/<%= product.productId.image[0] %>" alt="" />
                              </figure>
                            </div>
                            <div class="table_cart_cntnt">
                              <h1><%= product.productId.productName %></h1>
                            </div>
                          </td>
                          <td></td>
                          <td class="cart_page_price">$ <%= product.productId.price %></td>
                          <td>
                            <div class="counter">
                              <span class="down"onclick="changeQuantity('<%=product.productId._id%>',-1)"">-</span>
                              <input type="text"  value="<%= product.count %>" />
                              <span class="up" onclick="changeQuantity('<%=product.productId._id%>',1)">+</span>
                            </div>
                          </td>
                          <td class="cart_page_totl">$ <%= product.totalPrice %></td>
                          <td>
                            <a onclick="deletecart('<%= product.productId._id %>')" href="javascript:;"> <i class="fa fa-trash"></i></a>
                          </td>
                        </tr>
                        <% }); %>
                          <% } else { %>
                            <h2 class="text-danger text-center text-dark py-5">Cart is empty</h2>
                            <% } %>
                              <tr>
                                <td></td>
                                <td class="shop_btn_wrapper shop_car_btn_wrapper">
                                  <% if(cart.length > 0) { %>
                                    <% cart.forEach((product, index) => { %>
                                  <ul>
                                    <li><a href="checkout">Checkout</a></li>
                                  </ul>
                                  <% }); %>
                                  <% } else { %>
                                    <ul>
                                      <li><a href="/shop">Shop Now</a></li>
                                    </ul>
                                    <% } %>
                                </td>
                                <td></td>
                                <td></td>
                                <td></td>

                                <td class="cart_btn_cntnt">
                                  Sub Total : <span>$<%= totalAmount %></span>
                                </td>
                                <td></td>
                              </tr>
                    </tbody>
                  </table>
                </div>


              </div>

              <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                <div class="shipping_Wrapper">
                  <div class="estimate_shiping_Wrapper_cntnt estimate_shiping_Wrapper_repsnse">
                    <table class="table">
                      <tbody>
                        <tr>
                          <th>Sub Total :</th>
                          <td><span class="price">$ <%= totalAmount %></span></td>
                        </tr>
                        <tr>
                          <th>Service:</th>
                          <td><span class="price">free</span></td>
                        </tr>
                        <tr>
                          <th>Delivery charge:</th>
                          <td><span class="price">free</span></td>
                        </tr>
                        <tr>
                          <th class="cart_btn_cntnt">Sub Total :</th>
                          <td>
                            <span class="cart_btn_cntnt_clr">$ <%= totalAmount %></span>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                    <div class="shop_btn_wrapper shop_btn_wrapper_shipping">
                      <% if(cart.length > 0) { %>
                        <% cart.forEach((product, index) => { %>
                      <ul>
                        <li><a href="checkout">Checkout</a></li>
                      </ul>
                      <% }); %>
                      <% } else { %>
                        <ul>
                          <li><a href="/shop">Shop Now</a></li>
                        </ul>
                        <% } %>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- sw footer section start-->
      <%- include('../userLayout/footer.ejs') %>
        <!-- sw footer section end-->
        <!--main js files-->
        <script src="/userAssets/js/jquery_min.js"></script>
        <script src="/userAssets/js/materialize.min.js"></script>
        <script src="/userAssets/js/bootstrap.min.js"></script>
        <script src="/userAssets/js/jqu_menu.js"></script>
        <script src="/userAssets/js/jqu_slickmenu.js"></script>
        <script src="/userAssets/js/isotope.pkgd.min.js"></script>
        <script src="/userAssets/venobox/js/venobox.min.js"></script>
        <script src="/userAssets/js/jquery.inview.min.js"></script>
        <script src="/userAssets/js/jquery.mixitup.min.js"></script>
        <script src="/userAssets/js/jquery.countTo.js"></script>
        <script src="/userAssets/js/wow.min.js"></script>
        <script src="/userAssets/js/jquery.easing.1.3.js"></script>
        <script src="/userAssets/js/owl.carousel.js"></script>
        <script src="/userAssets/js/camera.min.js"></script>
        <script src="/userAssets/js/custom_2.js"></script>
        <script>
          const body = document.querySelector("body");
          const fab_nav = document.querySelector(".fab-container");
          const fab_rotate = document.querySelector(".fab-rotate");
          const fab_icon = document.querySelector(".fab-icon");

          if (fab_nav) {
            fab_nav.addEventListener("click", function () {
              fab_nav.classList.toggle("fab-opened");
            });

            body.addEventListener("click", function (e) {
              if (
                e.target != fab_nav &&
                e.target != fab_rotate &&
                e.target != fab_icon
              ) {
                fab_nav.classList.remove("fab-opened");
              }
            });
          }
        </script>
        <script>
          function increaseCount(a, b) {
            var input = b.previousElementSibling;
            var value = parseInt(input.value, 10);
            value = isNaN(value) ? 0 : value;
            value++;
            input.value = value;
          }

          function decreaseCount(a, b) {
            var input = b.nextElementSibling;
            var value = parseInt(input.value, 10);
            if (value > 1) {
              value = isNaN(value) ? 0 : value;
              value--;
              input.value = value;
            }
          }
        </script>
        <script>
          /*
    Reference: http://jsfiddle.net/BB3JK/47/
    */

          $("select").each(function () {
            var $this = $(this),
              numberOfOptions = $(this).children("option").length;

            $this.addClass("select-hidden");
            $this.wrap('<div class="select"></div>');
            $this.after('<div class="select-styled"></div>');

            var $styledSelect = $this.next("div.select-styled");
            $styledSelect.text($this.children("option").eq(0).text());

            var $list = $("<ul />", {
              class: "select-options",
            }).insertAfter($styledSelect);

            for (var i = 0; i < numberOfOptions; i++) {
              $("<li />", {
                text: $this.children("option").eq(i).text(),
                rel: $this.children("option").eq(i).val(),
              }).appendTo($list);
              //if ($this.children('option').eq(i).is(':selected')){
              //  $('li[rel="' + $this.children('option').eq(i).val() + '"]').addClass('is-selected')
              //}
            }

            var $listItems = $list.children("li");

            $styledSelect.click(function (e) {
              e.stopPropagation();
              $("div.select-styled.active")
                .not(this)
                .each(function () {
                  $(this).removeClass("active").next("ul.select-options").hide();
                });
              $(this).toggleClass("active").next("ul.select-options").toggle();
            });

            $listItems.click(function (e) {
              e.stopPropagation();
              $styledSelect.text($(this).text()).removeClass("active");
              $this.val($(this).attr("rel"));
              $list.hide();
              //console.log($this.val());
            });

            $(document).click(function () {
              $styledSelect.removeClass("active");
              $list.hide();
            });
          });
        </script>
        <!--js code-->
  </body>

  </html>